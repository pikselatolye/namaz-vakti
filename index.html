<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Ankara Namaz Vakitleri</title>
  <style>
    /* iPad 2 İçin En Stabil CSS Yapısı */
    body {
      margin: 0; padding: 0; background: #050914; color: #f5f8ff;
      font-family: Helvetica, Arial, sans-serif; height: 100vh; overflow: hidden;
    }
    .wrap { padding: 15px; box-sizing: border-box; height: 100vh; }

    /* Üst Başlık */
    .header {
      background: rgba(255,255,255,0.07); border-radius: 20px;
      padding: 20px 30px; margin-bottom: 12px; overflow: hidden;
    }
    .clock { float: right; font-size: 85px; font-weight: bold; line-height: 85px; }
    .title-area { float: left; }
    .title-area h1 { font-size: 35px; margin: 0; color: #7aa2ff; }
    .date-text { font-size: 18px; color: rgba(255,255,255,0.4); margin-top: 5px; }

    /* Sıradaki Vakit Kartı */
    .next-box {
      background: rgba(122,162,255,0.15); border-radius: 20px;
      padding: 20px 30px; margin-bottom: 12px; overflow: hidden;
      border: 1px solid rgba(122,162,255,0.3);
    }
    .n-left { float: left; }
    .n-right { float: right; text-align: right; }
    .n-name { font-size: 40px; font-weight: bold; }
    .n-timer { font-size: 45px; font-weight: bold; color: #8dffa8; }

    /* Vakit Satırları - ASIL ÇÖZÜM BURASI */
    .vakit-row {
      background: rgba(255,255,255,0.07); border-radius: 18px;
      margin-bottom: 8px; padding: 0 40px; overflow: hidden;
      height: 9vh; line-height: 9vh; /* Yüksekliği sabitledik */
      border: 1px solid rgba(255,255,255,0.05);
      clear: both; /* Satırları birbirinden ayırır */
    }
    .active { border: 3px solid #7aa2ff; background: rgba(122,162,255,0.12); }

    /* İsim Solda, Saat Sağda Sabit */
    .v-label { float: left; font-size: 35px; font-weight: bold; color: rgba(255,255,255,0.8); }
    .v-val { float: right; font-size: 55px; font-weight: 900; color: #7aa2ff; }

    /* iPad YATAY konumda ise 2 sütun yap */
    @media (orientation: landscape) {
      .vakit-row { width: 49.2%; float: left; margin-right: 0.8%; height: 12vh; line-height: 12vh; }
    }
  </style>
</head>
<body>

<div class="wrap">
  <div class="header">
    <div class="clock" id="clock">00:00</div>
    <div class="title-area">
      <h1>Ankara</h1>
      <div class="date-text" id="dateLine">-- Şubat 2026</div>
    </div>
  </div>

  <div class="next-box">
    <div class="n-left">
      <div style="font-size:14px;color:#7aa2ff;">SIRADAKİ</div>
      <div class="n-name" id="nextName">--</div>
    </div>
    <div class="n-right">
      <div style="font-size:14px;color:#8dffa8;">KALAN</div>
      <div class="n-timer" id="countdown">00:00:00</div>
    </div>
  </div>

  <div id="vakitList"></div>
</div>

<script>
(function(){
  var PRAYERS = [
    { key:"Imsak", tr:"İmsak" }, { key:"Gunes", tr:"Güneş" }, { key:"Ogle", tr:"Öğle" },
    { key:"Ikindi", tr:"İkindi" }, { key:"Aksam", tr:"Akşam" }, { key:"Yatsi", tr:"Yatsı" }
  ];

  function update() {
    fetch('vakit.json?v=' + Date.now())
      .then(function(r){ return r.json(); })
      .then(function(data){
        var t = data.today;
        var now = new Date();
        
        // Saat ve Tarih
        document.getElementById('clock').innerHTML = (now.getHours()<10?'0':'')+now.getHours()+":"+(now.getMinutes()<10?'0':'')+now.getMinutes();
        document.getElementById('dateLine').innerHTML = t.MiladiTarihUzun;

        // Vakit Listesi
        var html = '';
        for(var i=0; i<PRAYERS.length; i++){
          var p = PRAYERS[i];
          html += '<div class="vakit-row" id="row-'+p.key+'">' +
                  '<div class="v-label">'+p.tr+'</div>' +
                  '<div class="v-val">'+t[p.key]+'</div>' +
                  '</div>';
        }
        document.getElementById('vakitList').innerHTML = html;

        // Sıradaki Vakit Hesaplama
        var nextKey = "Imsak";
        var order = ["Imsak", "Ogle", "Ikindi", "Aksam", "Yatsi"];
        for(var j=0; j<order.length; j++){
          var hm = t[order[j]].split(':');
          var target = new Date(now); target.setHours(hm[0], hm[1], 0, 0);
          if(target > now){ nextKey = order[j]; break; }
        }
        
        document.getElementById('nextName').innerHTML = nextKey;
        document.getElementById('row-'+nextKey).className += ' active';

      }).catch(function(){});
  }

  update();
  setInterval(update, 1000);
})();
</script>
</body>
</html>
